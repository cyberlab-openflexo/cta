<?xml version="1.0" encoding="UTF-8"?>
<VirtualModel id="SYL-5" virtualModelClass="org.openflexo.foundation.fml.VirtualModel" modelVersion="2.0" uri="http://ensta-bretagne.fr/cyber/cta/CTA.fml" version="0.1" bigIconResource="../../../../../cta-module/src/main/resources/Icons/CTA/module-cta-64.png" smallIconResource="../../../../../cta-module/src/main/resources/Icons/CTA/module-cta-16.png" name="CTA" mediumIconResource="../../../../../cta-module/src/main/resources/Icons/CTA/module-cta-32.png" author="sylvain" userID="SYL" flexoID="5">
  <FlexoConcept id="SYL-36" bigIconResource="../Icons/SystemNode_64x64.png" smallIconResource="../Icons/SystemNode_16x16.png" name="SystemNode" mediumIconResource="../Icons/SystemNode_32x32.png" userID="SYL" flexoID="36">
    <Inspector id="SYL-37" renderer="nodeName" inspectorTitle="SystemNode" userID="SYL" flexoID="37" />
    <EmbeddedFlexoConcept id="SYL-154" name="MachineryAllocation" userID="SYL" flexoID="154">
      <Inspector id="SYL-153" renderer="(machinery.name + ((executionUnitDefinition != null) ? ((&quot;[&quot; + executionUnitDefinition.name) + &quot;]&quot;) : &quot;[Non allocated]&quot;))" inspectorTitle="MachineryAllocation" userID="SYL" flexoID="153">
        <InspectorEntry id="SYL-160" container="pimcaModel" widget="CUSTOM_WIDGET" data="machinery" name="machinery" label="machinery" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml#Machinery&gt;" userID="SYL" flexoID="160" />
        <InspectorEntry id="SYL-255" container="tsm" widget="CUSTOM_WIDGET" data="executionUnitDefinition" name="executionUnit" label="executionUnit" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;http://ensta-bretagne.fr/cyber/cta/TSM.fml#ExecutionUnit&gt;" userID="SYL" flexoID="255" />
      </Inspector>
      <EmbeddedFlexoConcept id="GUE-379" name="MachineryConnection" userID="GUE" flexoID="379">
        <Inspector id="GUE-380" inspectorTitle="MachineryConnection" userID="GUE" flexoID="380" />
        <PrimitiveRole id="GUE-386" primitiveType="String" cloningStrategy="Clone" cardinality="ZeroOne" name="referenceName" userID="GUE" flexoID="386" />
        <FlexoConceptInstanceRole id="GUE-387" virtualModelInstance="container.container.container" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#MachineryAllocation" cloningStrategy="Reference" cardinality="ZeroOne" name="reference" userID="GUE" flexoID="387" />
        <FlexoConceptInstanceRole id="GUE-388" virtualModelInstance="pimcaModel" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml#Relation" container="pimcaModel" cloningStrategy="Reference" cardinality="ZeroOne" name="relation" userID="GUE" flexoID="388" />
        <FlexoConceptInstanceRole id="GUE-470" virtualModelInstance="tsm" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/cta/TSM.fml#ExecutionUnitReference" cloningStrategy="Reference" cardinality="ZeroOne" name="executionUnitReference" userID="GUE" flexoID="470" />
        <CreationScheme id="GUE-384" name="create" width="800" label="create" height="600" userID="GUE" flexoID="384">
          <BehaviourControlGraph_Sequence id="GUE-395" userID="GUE" flexoID="395">
            <ControlGraph2_Sequence id="GUE-417" ownerContext="controlGraph2" userID="GUE" flexoID="417">
              <ControlGraph2_Sequence id="GUE-483" ownerContext="controlGraph2" userID="GUE" flexoID="483">
                <ControlGraph2_AssignationAction id="GUE-482" assign="executionUnitReference" ownerContext="controlGraph2" userID="GUE" flexoID="482">
                  <AssignableAction_AddFlexoConceptInstance id="GUE-478" container="executionUnitDefinition" creationSchemeURI="http://ensta-bretagne.fr/cyber/cta/TSM.fml#ExecutionUnitReference.create(aName,flexoConceptType,description)" receiver="tsm" ownerContext="controlGraph2" userID="GUE" flexoID="478">
                    <AddFlexoConceptInstanceParameter id="GUE-479" paramName="aName" value="parameters.referenceName" userID="GUE" flexoID="479" />
                    <AddFlexoConceptInstanceParameter id="GUE-480" paramName="flexoConceptType" value="parameters.reference.executionUnitDefinition.supportConcept" userID="GUE" flexoID="480" />
                    <AddFlexoConceptInstanceParameter id="GUE-481" paramName="description" value="(&quot;Reference to &quot; + parameters.reference.machinery.name)" userID="GUE" flexoID="481" />
                  </AssignableAction_AddFlexoConceptInstance>
                </ControlGraph2_AssignationAction>
                <ControlGraph1_AssignationAction id="GUE-416" assign="reference" ownerContext="controlGraph1" userID="GUE" flexoID="416">
                  <AssignableAction_ExpressionAction id="GUE-415" expression="parameters.reference" userID="GUE" flexoID="415" />
                </ControlGraph1_AssignationAction>
              </ControlGraph2_Sequence>
              <ControlGraph1_AssignationAction id="GUE-394" assign="relation" ownerContext="controlGraph1" userID="GUE" flexoID="394">
                <AssignableAction_ExpressionAction id="GUE-393" expression="parameters.relation" userID="GUE" flexoID="393" />
              </ControlGraph1_AssignationAction>
            </ControlGraph2_Sequence>
            <ControlGraph1_AssignationAction id="GUE-392" assign="referenceName" ownerContext="controlGraph1" userID="GUE" flexoID="392">
              <AssignableAction_ExpressionAction id="GUE-391" expression="parameters.referenceName" userID="GUE" flexoID="391" />
            </ControlGraph1_AssignationAction>
          </BehaviourControlGraph_Sequence>
          <GenericBehaviourParameter id="GUE-390" widget="TEXT_FIELD" name="referenceName" type="java.lang.String" userID="GUE" flexoID="390" />
          <GenericBehaviourParameter id="GUE-389" container="pimcaModel" widget="CUSTOM_WIDGET" name="relation" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml#Relation&gt;" userID="GUE" flexoID="389" />
          <GenericBehaviourParameter id="GUE-414" widget="CUSTOM_WIDGET" name="reference" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;http://ensta-bretagne.fr/cyber/cta/CTA.fml#MachineryAllocation&gt;" userID="GUE" flexoID="414" />
        </CreationScheme>
        <DeletionScheme id="GUE-385" name="delete" width="800" label="delete" height="600" userID="GUE" flexoID="385">
          <BehaviourControlGraph_EmptyControlGraph id="GUE-396" userID="GUE" flexoID="396" />
        </DeletionScheme>
        <ActionScheme id="GUE-495" name="updateReference" width="800" label="updateReference" height="600" userID="GUE" flexoID="495">
          <BehaviourControlGraph_Sequence id="GUE-503" userID="GUE" flexoID="503">
            <ControlGraph2_Sequence id="GUE-504" ownerContext="controlGraph2" userID="GUE" flexoID="504">
              <ControlGraph2_AssignationAction id="GUE-499" assign="executionUnitReference.property.flexoConceptType" ownerContext="controlGraph2" userID="GUE" flexoID="499">
                <AssignableAction_ExpressionAction id="GUE-498" expression="reference.executionUnitDefinition.supportConcept" userID="GUE" flexoID="498" />
              </ControlGraph2_AssignationAction>
              <ControlGraph1_LogAction id="GUE-501" logLevel="INFO" logString="(&quot;Le type est maintenant: &quot; + reference.executionUnitDefinition.supportConcept)" ownerContext="controlGraph1" userID="GUE" flexoID="501" />
            </ControlGraph2_Sequence>
            <ControlGraph1_LogAction id="GUE-497" logLevel="INFO" logString="(&quot;Mise a jour de la reference pour &quot; + reference)" ownerContext="controlGraph1" userID="GUE" flexoID="497" />
          </BehaviourControlGraph_Sequence>
        </ActionScheme>
      </EmbeddedFlexoConcept>
      <FlexoConceptInstanceRole id="SYL-161" virtualModelInstance="pimcaModel" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml#Machinery" cloningStrategy="Reference" cardinality="ZeroOne" name="machinery" userID="SYL" flexoID="161" />
      <FlexoConceptInstanceRole id="SYL-175" virtualModelInstance="tsm" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/cta/TSM.fml#ExecutionUnitDefinition" cloningStrategy="Reference" cardinality="ZeroOne" name="executionUnitDefinition" userID="SYL" flexoID="175" />
      <GetSetProperty id="SYL-488" name="machineryConnections" userID="SYL" flexoID="488">
        <SetControlGraph_EmptyControlGraph id="SYL-489" ownerContext="setControlGraph" userID="SYL" flexoID="489" />
        <GetControlGraph_ReturnStatement id="SYL-491" ownerContext="getControlGraph" userID="SYL" flexoID="491">
          <AssignableAction_SelectFlexoConceptInstance id="SYL-490" container="this" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#MachineryConnection" receiver="container.container" userID="SYL" flexoID="490" />
        </GetControlGraph_ReturnStatement>
      </GetSetProperty>
      <CreationScheme id="SYL-158" name="create" width="800" label="create" height="600" userID="SYL" flexoID="158">
        <BehaviourControlGraph_Sequence id="SYL-324" userID="SYL" flexoID="324">
          <ControlGraph2_NotifyPropertyChangedAction id="SYL-323" propertyName="machineryAllocations" object="container" ownerContext="controlGraph2" userID="SYL" flexoID="323" />
          <ControlGraph1_AssignationAction id="SYL-163" assign="machinery" ownerContext="controlGraph1" userID="SYL" flexoID="163">
            <AssignableAction_ExpressionAction id="SYL-162" expression="parameters.aMachinery" userID="SYL" flexoID="162" />
          </ControlGraph1_AssignationAction>
        </BehaviourControlGraph_Sequence>
        <GenericBehaviourParameter id="SYL-164" container="pimcaModel" isRequired="true" widget="CUSTOM_WIDGET" name="aMachinery" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml#Machinery&gt;" userID="SYL" flexoID="164" />
      </CreationScheme>
      <DeletionScheme id="SYL-159" name="delete" width="800" label="delete" height="600" userID="SYL" flexoID="159">
        <BehaviourControlGraph_EmptyControlGraph id="SYL-165" userID="SYL" flexoID="165" />
      </DeletionScheme>
      <ActionScheme id="SYL-176" conditional="(executionUnitDefinition = null)" name="allocateExistingExecutionUnit" width="800" label="allocate_existing_execution_unit" height="600" description="Allocate existing execution unit" userID="SYL" flexoID="176">
        <BehaviourControlGraph_AssignationAction id="SYL-178" assign="executionUnitDefinition" userID="SYL" flexoID="178">
          <AssignableAction_ExpressionAction id="SYL-177" expression="parameters.executionUnitDefinition" userID="SYL" flexoID="177" />
        </BehaviourControlGraph_AssignationAction>
        <GenericBehaviourParameter id="SYL-179" container="tsm" isRequired="true" widget="CUSTOM_WIDGET" name="executionUnitDefinition" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;http://ensta-bretagne.fr/cyber/cta/TSM.fml#ExecutionUnit&gt;" userID="SYL" flexoID="179" />
      </ActionScheme>
      <ActionScheme id="SYL-184" conditional="(executionUnitDefinition = null)" name="allocateNewGuardActionExecutionUnit" width="800" label="allocate_new_guard_action_execution_unit" height="600" description="Une description ici ?&#xA;" userID="SYL" flexoID="184">
        <BehaviourControlGraph_Sequence id="GUE-411" userID="GUE" flexoID="411">
          <ControlGraph2_Sequence id="GUE-506" ownerContext="controlGraph2" userID="GUE" flexoID="506">
            <ControlGraph2_ReturnStatement id="GUE-410" ownerContext="controlGraph2" userID="GUE" flexoID="410">
              <AssignableAction_ExpressionAction id="GUE-409" expression="executionUnitDefinition" userID="GUE" flexoID="409" />
            </ControlGraph2_ReturnStatement>
            <ControlGraph1_ExpressionAction id="GUE-505" expression="container.updateConnections()" ownerContext="controlGraph1" userID="GUE" flexoID="505" />
          </ControlGraph2_Sequence>
          <ControlGraph1_AssignationAction id="SYL-182" assign="executionUnitDefinition" ownerContext="controlGraph1" userID="SYL" flexoID="182">
            <AssignableAction_AddFlexoConceptInstance id="SYL-181" container="systemNodeExecutionDefinition" creationSchemeURI="http://ensta-bretagne.fr/cyber/cta/TSM.fml#GuardActionExecutionUnitDefinition.create(name)" receiver="tsm" userID="SYL" flexoID="181">
              <AddFlexoConceptInstanceParameter id="SYL-180" paramName="name" value="parameters.executionUnitName" userID="SYL" flexoID="180" />
            </AssignableAction_AddFlexoConceptInstance>
          </ControlGraph1_AssignationAction>
        </BehaviourControlGraph_Sequence>
        <GenericBehaviourParameter id="SYL-183" isRequired="true" widget="TEXT_FIELD" name="executionUnitName" type="java.lang.String" userID="SYL" flexoID="183" />
      </ActionScheme>
      <ActionScheme id="SYL-256" conditional="(executionUnit != null)" visibility="Public" name="clearAllocation" width="800" label="clearAllocation" height="600" userID="SYL" flexoID="256">
        <BehaviourControlGraph_AssignationAction id="SYL-258" assign="executionUnitDefinition" userID="SYL" flexoID="258">
          <AssignableAction_ExpressionAction id="SYL-257" expression="null" userID="SYL" flexoID="257" />
        </BehaviourControlGraph_AssignationAction>
      </ActionScheme>
      <ActionScheme id="GUE-412" name="createMachineryConnection" width="800" label="createMachineryConnection" height="600" userID="GUE" flexoID="412">
        <BehaviourControlGraph_Sequence id="GUE-456" userID="GUE" flexoID="456">
          <ControlGraph2_ReturnStatement id="GUE-455" ownerContext="controlGraph2" userID="GUE" flexoID="455">
            <AssignableAction_ExpressionAction id="GUE-454" expression="returned" userID="GUE" flexoID="454" />
          </ControlGraph2_ReturnStatement>
          <ControlGraph1_DeclarationAction id="GUE-447" variable="returned" ownerContext="controlGraph1" userID="GUE" flexoID="447">
            <AssignableAction_AddFlexoConceptInstance id="GUE-441" container="this" creationSchemeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#MachineryConnection.create(referenceName,relation,reference)" receiver="container.container" ownerContext="controlGraph2" userID="GUE" flexoID="441">
              <AddFlexoConceptInstanceParameter id="GUE-443" paramName="referenceName" value="parameters.referenceName" userID="GUE" flexoID="443" />
              <AddFlexoConceptInstanceParameter id="GUE-444" paramName="relation" value="parameters.relation" userID="GUE" flexoID="444" />
              <AddFlexoConceptInstanceParameter id="GUE-445" paramName="reference" value="parameters.reference" userID="GUE" flexoID="445" />
            </AssignableAction_AddFlexoConceptInstance>
          </ControlGraph1_DeclarationAction>
        </BehaviourControlGraph_Sequence>
        <GenericBehaviourParameter id="GUE-419" widget="CUSTOM_WIDGET" name="referenceName" type="java.lang.String" userID="GUE" flexoID="419" />
        <GenericBehaviourParameter id="GUE-420" widget="CUSTOM_WIDGET" name="relation" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml#Relation&gt;" userID="GUE" flexoID="420" />
        <GenericBehaviourParameter id="GUE-421" widget="CUSTOM_WIDGET" name="reference" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;http://ensta-bretagne.fr/cyber/cta/CTA.fml#MachineryAllocation&gt;" userID="GUE" flexoID="421" />
      </ActionScheme>
    </EmbeddedFlexoConcept>
    <FMLRTVirtualModelInstanceModelSlot id="SYL-43" virtualModelURI="http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml" isRequired="true" cloningStrategy="Reference" cardinality="ZeroOne" name="pimcaModel" userID="SYL" flexoID="43" />
    <FMLRTVirtualModelInstanceModelSlot id="SYL-44" virtualModelURI="http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCADiagram.fml" isRequired="true" cloningStrategy="Reference" cardinality="OneMany" name="diagrams" userID="SYL" flexoID="44" />
    <ExpressionProperty id="SYL-90" expression="diagrams.get(0)" name="defaultDiagram" userID="SYL" flexoID="90" />
    <PrimitiveRole id="SYL-111" primitiveType="String" cloningStrategy="Clone" cardinality="ZeroOne" name="nodeName" userID="SYL" flexoID="111" />
    <GetSetProperty id="SYL-214" name="machineryAllocations" userID="SYL" flexoID="214">
      <SetControlGraph_EmptyControlGraph id="SYL-218" ownerContext="setControlGraph" userID="SYL" flexoID="218" />
      <GetControlGraph_ReturnStatement id="SYL-217" ownerContext="getControlGraph" userID="SYL" flexoID="217">
        <AssignableAction_SelectFlexoConceptInstance id="SYL-216" container="this" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#MachineryAllocation" receiver="container" userID="SYL" flexoID="216" />
      </GetControlGraph_ReturnStatement>
    </GetSetProperty>
    <FlexoConceptInstanceRole id="SYL-228" virtualModelInstance="container" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#SystemNode" cloningStrategy="Reference" cardinality="ZeroOne" name="parentNode" userID="SYL" flexoID="228" />
    <FlexoConceptInstanceRole id="SYL-229" virtualModelInstance="container" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#SystemNode" cloningStrategy="Reference" cardinality="ZeroMany" name="childrenNodes" userID="SYL" flexoID="229" />
    <FlexoConceptInstanceRole id="SYL-347" virtualModelInstance="tsm" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/cta/TSM.fml#SystemNodeExecutionDefinition" cloningStrategy="Reference" cardinality="ZeroOne" name="systemNodeExecutionDefinition" userID="SYL" flexoID="347" />
    <CreationScheme id="SYL-47" name="create" width="800" label="create" height="600" userID="SYL" flexoID="47">
      <BehaviourControlGraph_Sequence id="SYL-55" ownerContext="controlGraph2" userID="SYL" flexoID="55">
        <ControlGraph2_Sequence id="SYL-114" ownerContext="controlGraph2" userID="SYL" flexoID="114">
          <ControlGraph2_Sequence id="SYL-351" ownerContext="controlGraph2" userID="SYL" flexoID="351">
            <ControlGraph2_AssignationAction id="SYL-350" assign="systemNodeExecutionDefinition" ownerContext="controlGraph2" userID="SYL" flexoID="350">
              <AssignableAction_AddFlexoConceptInstance id="SYL-349" creationSchemeURI="http://ensta-bretagne.fr/cyber/cta/TSM.fml#SystemNodeExecutionDefinition.create(name)" receiver="tsm" userID="SYL" flexoID="349">
                <AddFlexoConceptInstanceParameter id="SYL-352" paramName="name" value="nodeName" userID="SYL" flexoID="352" />
              </AssignableAction_AddFlexoConceptInstance>
            </ControlGraph2_AssignationAction>
            <ControlGraph1_ExpressionAction id="SYL-91" expression="this.createNewDiagram((&quot;DefaultDiagramFor&quot; + pimcaModel.name),&quot;Default diagram&quot;,&quot;&quot;)" ownerContext="controlGraph1" userID="SYL" flexoID="91" />
          </ControlGraph2_Sequence>
          <ControlGraph1_AssignationAction id="SYL-113" assign="nodeName" ownerContext="controlGraph1" userID="SYL" flexoID="113">
            <AssignableAction_ExpressionAction id="SYL-112" expression="parameters.nodeName" userID="SYL" flexoID="112" />
          </ControlGraph1_AssignationAction>
        </ControlGraph2_Sequence>
        <ControlGraph1_AssignationAction id="SYL-54" assign="pimcaModel" ownerContext="controlGraph1" userID="SYL" flexoID="54">
          <AssignableAction_AddVirtualModelInstance id="SYL-53" virtualModelInstanceTitle="parameters.nodeName" virtualModelInstanceName="parameters.nodeName" creationSchemeURI="http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml.create()" receiver="pimca" userID="SYL" flexoID="53" />
        </ControlGraph1_AssignationAction>
      </BehaviourControlGraph_Sequence>
      <GenericBehaviourParameter id="SYL-63" widget="TEXT_FIELD" name="nodeName" type="java.lang.String" userID="SYL" flexoID="63" />
    </CreationScheme>
    <ActionScheme id="SYL-76" name="createNewDiagram" width="800" label="createNewDiagram" height="600" userID="SYL" flexoID="76">
      <BehaviourControlGraph_Sequence id="SYL-92" userID="SYL" flexoID="92">
        <ControlGraph2_Sequence id="SYL-93" ownerContext="controlGraph2" userID="SYL" flexoID="93">
          <ControlGraph2_Sequence id="SYL-94" ownerContext="controlGraph2" userID="SYL" flexoID="94">
            <ControlGraph2_ReturnStatement id="SYL-89" ownerContext="controlGraph2" userID="SYL" flexoID="89">
              <AssignableAction_ExpressionAction id="SYL-88" expression="newDiagram" userID="SYL" flexoID="88" />
            </ControlGraph2_ReturnStatement>
            <ControlGraph1_AddToListAction id="SYL-86" list="diagrams" ownerContext="controlGraph1" userID="SYL" flexoID="86">
              <AssignableAction_ExpressionAction id="SYL-87" expression="newDiagram" userID="SYL" flexoID="87" />
            </ControlGraph1_AddToListAction>
          </ControlGraph2_Sequence>
          <ControlGraph1_DeclarationAction id="SYL-81" variable="newDiagram" ownerContext="controlGraph1" userID="SYL" flexoID="81">
            <AssignableAction_AddVirtualModelInstance id="SYL-84" virtualModelInstanceTitle="parameters.diagramName" virtualModelInstanceName="parameters.diagramName" creationSchemeURI="http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCADiagram.fml.init(diagramName,diagramTitle,model)" receiver="pimca" ownerContext="controlGraph2" userID="SYL" flexoID="84">
              <AddFlexoConceptInstanceParameter id="SYL-82" paramName="diagramName" value="parameters.diagramName" userID="SYL" flexoID="82" />
              <AddFlexoConceptInstanceParameter id="SYL-83" paramName="model" value="pimcaModel" userID="SYL" flexoID="83" />
              <AddFlexoConceptInstanceParameter id="SYL-100" paramName="diagramTitle" value="parameters.diagramTitle" userID="SYL" flexoID="100" />
            </AssignableAction_AddVirtualModelInstance>
          </ControlGraph1_DeclarationAction>
        </ControlGraph2_Sequence>
        <ControlGraph1_LogAction id="SYL-80" logLevel="INFO" logString="(&quot;Create new diagram &quot; + parameters.diagramName)" ownerContext="controlGraph1" userID="SYL" flexoID="80" />
      </BehaviourControlGraph_Sequence>
      <GenericBehaviourParameter id="SYL-78" widget="TEXT_FIELD" name="diagramName" type="java.lang.String" userID="SYL" flexoID="78" />
      <GenericBehaviourParameter id="SYL-101" widget="TEXT_FIELD" name="diagramTitle" type="java.lang.String" userID="SYL" flexoID="101" />
      <GenericBehaviourParameter id="SYL-121" widget="TEXT_AREA" name="diagramDescription" type="java.lang.String" userID="SYL" flexoID="121" />
    </ActionScheme>
    <ActionScheme id="SYL-141" name="allocateExistingExecutionUnit" width="800" label="allocate_existing_execution_unit" height="600" userID="SYL" flexoID="141">
      <BehaviourControlGraph_ExpressionAction id="SYL-199" expression="this.getMachineryAllocation(parameters.machinery).allocateExistingExecutionUnit(parameters.executionUnit)" userID="SYL" flexoID="199" />
      <GenericBehaviourParameter id="SYL-198" container="pimcaModel" widget="CUSTOM_WIDGET" name="machinery" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml#Machinery&gt;" userID="SYL" flexoID="198" />
      <GenericBehaviourParameter id="SYL-146" container="tsm" isRequired="true" widget="CUSTOM_WIDGET" name="executionUnit" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;http://ensta-bretagne.fr/cyber/cta/TSM.fml#ExecutionUnit&gt;" userID="SYL" flexoID="146" />
    </ActionScheme>
    <ActionScheme id="SYL-145" name="allocateNewGuardActionExecutionUnit" width="800" label="allocate_new_guard_action_execution_unit" height="600" description="Create and allocate new Guard/Action execution unit&#xA;" userID="SYL" flexoID="145">
      <BehaviourControlGraph_ExpressionAction id="SYL-201" expression="this.getMachineryAllocation(parameters.machinery).allocateNewGuardActionExecutionUnit(parameters.executionUnitName)" userID="SYL" flexoID="201" />
      <GenericBehaviourParameter id="SYL-200" container="pimcaModel" widget="CUSTOM_WIDGET" name="machinery" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml#Machinery&gt;" userID="SYL" flexoID="200" />
      <GenericBehaviourParameter id="SYL-152" isRequired="true" widget="TEXT_FIELD" name="executionUnitName" type="java.lang.String" userID="SYL" flexoID="152" />
    </ActionScheme>
    <ActionScheme id="SYL-185" name="getMachineryAllocation" width="800" label="getMachineryAllocation" height="600" userID="SYL" flexoID="185">
      <BehaviourControlGraph_Sequence id="SYL-202" userID="SYL" flexoID="202">
        <ControlGraph2_Sequence id="SYL-203" ownerContext="controlGraph2" userID="SYL" flexoID="203">
          <ControlGraph2_ReturnStatement id="SYL-197" ownerContext="controlGraph2" userID="SYL" flexoID="197">
            <AssignableAction_ExpressionAction id="SYL-196" expression="returned" userID="SYL" flexoID="196" />
          </ControlGraph2_ReturnStatement>
          <ControlGraph1_ConditionalAction id="SYL-191" condition="(returned = null)" ownerContext="controlGraph1" userID="SYL" flexoID="191">
            <ThenControlGraph_AssignationAction id="SYL-195" assign="returned" ownerContext="thenControlGraph" userID="SYL" flexoID="195">
              <AssignableAction_AddFlexoConceptInstance id="SYL-193" container="this" creationSchemeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#MachineryAllocation.create(aMachinery)" receiver="container" userID="SYL" flexoID="193">
                <AddFlexoConceptInstanceParameter id="SYL-194" paramName="aMachinery" value="parameters.machinery" userID="SYL" flexoID="194" />
              </AssignableAction_AddFlexoConceptInstance>
            </ThenControlGraph_AssignationAction>
          </ControlGraph1_ConditionalAction>
        </ControlGraph2_Sequence>
        <ControlGraph1_DeclarationAction id="SYL-189" variable="returned" ownerContext="controlGraph1" userID="SYL" flexoID="189">
          <AssignableAction_SelectUniqueFlexoConceptInstance id="SYL-187" container="this" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#MachineryAllocation" receiver="container" userID="SYL" flexoID="187">
            <Condition id="SYL-188" condition="(selected.machinery = parameters.machinery)" userID="SYL" flexoID="188" />
          </AssignableAction_SelectUniqueFlexoConceptInstance>
        </ControlGraph1_DeclarationAction>
      </BehaviourControlGraph_Sequence>
      <GenericBehaviourParameter id="SYL-204" container="pimcaModel" isRequired="true" widget="CUSTOM_WIDGET" name="machinery" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml#Machinery&gt;" userID="SYL" flexoID="204" />
    </ActionScheme>
    <ActionScheme id="SYL-302" visibility="Public" name="update" width="800" label="update" height="600" userID="SYL" flexoID="302">
      <BehaviourControlGraph_Sequence id="SYL-319" userID="SYL" flexoID="319">
        <ControlGraph2_Sequence id="SYL-320" ownerContext="controlGraph2" userID="SYL" flexoID="320">
          <ControlGraph2_Sequence id="SYL-321" ownerContext="controlGraph2" userID="SYL" flexoID="321">
            <ControlGraph2_FinalizeMatching id="SYL-317" container="this" flexoBehaviourURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#MachineryAllocation.delete()" matchingSet="matchingSet" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#MachineryAllocation" ownerContext="controlGraph2" userID="SYL" flexoID="317" />
            <ControlGraph1_IterationAction id="SYL-276" iteratorName="machinery" ownerContext="controlGraph1" userID="SYL" flexoID="276">
              <Iteration_SelectFlexoConceptInstance id="SYL-278" container="pimcaModel" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml#Machinery" receiver="pimcaModel" ownerContext="iterationControlGraph" userID="SYL" flexoID="278" />
              <ControlGraph_MatchFlexoConceptInstance id="SYL-280" container="this" creationSchemeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#MachineryAllocation.create(aMachinery)" matchingSet="matchingSet" receiver="container" ownerContext="controlGraph" userID="SYL" flexoID="280">
                <MatchingCriteria id="SYL-282" patternRoleName="machinery" value="machinery" userID="SYL" flexoID="282" />
                <MatchingCriteria id="SYL-283" patternRoleName="executionUnitDefinition" userID="SYL" flexoID="283" />
                <MatchingCriteria id="SYL-284" patternRoleName="pimcaModel" userID="SYL" flexoID="284" />
                <MatchingCriteria id="SYL-285" patternRoleName="diagrams" userID="SYL" flexoID="285" />
                <MatchingCriteria id="SYL-286" patternRoleName="defaultDiagram" userID="SYL" flexoID="286" />
                <MatchingCriteria id="SYL-287" patternRoleName="nodeName" userID="SYL" flexoID="287" />
                <MatchingCriteria id="SYL-288" patternRoleName="machineryAllocations" userID="SYL" flexoID="288" />
                <MatchingCriteria id="SYL-289" patternRoleName="parentNode" userID="SYL" flexoID="289" />
                <MatchingCriteria id="SYL-290" patternRoleName="childrenNodes" userID="SYL" flexoID="290" />
                <MatchingCriteria id="SYL-291" patternRoleName="executions" userID="SYL" flexoID="291" />
                <MatchingCriteria id="SYL-292" patternRoleName="pimca" userID="SYL" flexoID="292" />
                <MatchingCriteria id="SYL-293" patternRoleName="rootNode" userID="SYL" flexoID="293" />
                <MatchingCriteria id="SYL-294" patternRoleName="tsm" userID="SYL" flexoID="294" />
                <CreateFlexoConceptInstanceParameter id="SYL-281" paramName="aMachinery" value="machinery" userID="SYL" flexoID="281" />
              </ControlGraph_MatchFlexoConceptInstance>
            </ControlGraph1_IterationAction>
          </ControlGraph2_Sequence>
          <ControlGraph1_DeclarationAction id="SYL-271" variable="matchingSet" ownerContext="controlGraph1" userID="SYL" flexoID="271">
            <AssignableAction_InitiateMatching id="SYL-270" container="this" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#MachineryAllocation" userID="SYL" flexoID="270" />
          </ControlGraph1_DeclarationAction>
        </ControlGraph2_Sequence>
        <ControlGraph1_LogAction id="SYL-305" logLevel="INFO" logString="(&quot;Updating &quot; + this)" ownerContext="controlGraph1" userID="SYL" flexoID="305" />
      </BehaviourControlGraph_Sequence>
    </ActionScheme>
    <EventListener id="SYL-334" listenedVirtualModelInstance="pimcaModel" flexoEventTypeURI="http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml#NewMachinery" name="newMachinery" width="800" label="newMachinery" height="600" userID="SYL" flexoID="334">
      <BehaviourControlGraph_ExpressionAction id="SYL-335" expression="this.update()" userID="SYL" flexoID="335" />
    </EventListener>
    <EventListener id="SYL-336" listenedVirtualModelInstance="pimcaModel" flexoEventTypeURI="http://ensta-bretagne.fr/cyber/pimca/PimCA.fml/PimCAModel.fml#DeletedMachinery" name="deletedMachinery" width="800" label="newMachinery" height="600" userID="SYL" flexoID="336">
      <BehaviourControlGraph_ExpressionAction id="SYL-337" expression="this.update()" userID="SYL" flexoID="337" />
    </EventListener>
    <ActionScheme id="GUE-484" name="updateConnections" width="800" label="updateConnections" height="600" userID="GUE" flexoID="484">
      <BehaviourControlGraph_IterationAction id="GUE-486" iteratorName="machineryAllocation" userID="GUE" flexoID="486">
        <Iteration_ExpressionAction id="GUE-487" expression="machineryAllocations" ownerContext="iterationControlGraph" userID="GUE" flexoID="487" />
        <ControlGraph_IterationAction id="GUE-493" iteratorName="machineryConnection" ownerContext="controlGraph" userID="GUE" flexoID="493">
          <Iteration_ExpressionAction id="GUE-494" expression="machineryAllocation.machineryConnections" ownerContext="iterationControlGraph" userID="GUE" flexoID="494" />
          <ControlGraph_ExpressionAction id="GUE-502" expression="machineryConnection.updateReference()" ownerContext="controlGraph" userID="GUE" flexoID="502" />
        </ControlGraph_IterationAction>
      </BehaviourControlGraph_IterationAction>
    </ActionScheme>
  </FlexoConcept>
  <FlexoConcept idref="SYL-154" />
  <FlexoConcept idref="GUE-379" />
  <UseModelSlotDeclaration id="0" modelSlotClass="org.openflexo.foundation.fml.rt.FMLRTVirtualModelInstanceModelSlot" userID="SYL" flexoID="-1" />
  <Inspector id="SYL-1" inspectorTitle="Cta" userID="SYL" flexoID="1" />
  <FMLRTVirtualModelInstanceModelSlot id="SYL-9" virtualModelURI="http://ensta-bretagne.fr/cyber/pimca/PimCA.fml" isRequired="true" cloningStrategy="Reference" cardinality="ZeroOne" name="pimca" userID="SYL" flexoID="9" />
  <FlexoConceptInstanceRole id="SYL-95" virtualModelInstance="this" flexoConceptTypeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#SystemNode" cloningStrategy="Reference" cardinality="One" name="rootNode" userID="SYL" flexoID="95" />
  <FMLRTVirtualModelInstanceModelSlot id="SYL-128" virtualModelURI="http://ensta-bretagne.fr/cyber/cta/TSM.fml" isRequired="true" cloningStrategy="Reference" cardinality="ZeroOne" name="tsm" userID="SYL" flexoID="128" />
  <GetSetProperty id="SYL-239" name="executions" userID="SYL" flexoID="239">
    <SetControlGraph_EmptyControlGraph id="SYL-245" ownerContext="setControlGraph" userID="SYL" flexoID="245" />
    <GetControlGraph_ReturnStatement id="SYL-244" ownerContext="getControlGraph" userID="SYL" flexoID="244">
      <AssignableAction_SelectVirtualModelInstance id="SYL-243" container="this" virtualModelTypeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml/Execution.fml" receiver="this" userID="SYL" flexoID="243" />
    </GetControlGraph_ReturnStatement>
  </GetSetProperty>
  <CreationScheme id="SYL-10" name="init" width="800" label="init" height="600" userID="SYL" flexoID="10">
    <BehaviourControlGraph_Sequence id="SYL-22" userID="SYL" flexoID="22">
      <ControlGraph2_Sequence id="SYL-133" ownerContext="controlGraph2" userID="SYL" flexoID="133">
        <ControlGraph2_AssignationAction id="SYL-99" assign="rootNode" ownerContext="controlGraph2" userID="SYL" flexoID="99">
          <AssignableAction_AddFlexoConceptInstance id="SYL-97" creationSchemeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml#SystemNode.create(nodeName)" receiver="this" userID="SYL" flexoID="97">
            <AddFlexoConceptInstanceParameter id="SYL-98" paramName="nodeName" value="&quot;System&quot;" userID="SYL" flexoID="98" />
          </AssignableAction_AddFlexoConceptInstance>
        </ControlGraph2_AssignationAction>
        <ControlGraph1_AssignationAction id="SYL-132" assign="tsm" ownerContext="controlGraph1" userID="SYL" flexoID="132">
          <AssignableAction_AddVirtualModelInstance id="SYL-130" virtualModelInstanceTitle="&quot;TSM&quot;" virtualModelInstanceName="&quot;TSM&quot;" creationSchemeURI="http://ensta-bretagne.fr/cyber/cta/TSM.fml.init(virtualModelName)" receiver="this" ownerContext="controlGraph1" userID="SYL" flexoID="130">
            <AddFlexoConceptInstanceParameter id="SYL-131" paramName="virtualModelName" value="&quot;ExecutionModel&quot;" userID="SYL" flexoID="131" />
          </AssignableAction_AddVirtualModelInstance>
        </ControlGraph1_AssignationAction>
      </ControlGraph2_Sequence>
      <ControlGraph1_AssignationAction id="SYL-14" assign="pimca" ownerContext="controlGraph1" userID="SYL" flexoID="14">
        <AssignableAction_AddVirtualModelInstance id="SYL-13" virtualModelInstanceTitle="&quot;PimCA&quot;" virtualModelInstanceName="&quot;PimCA&quot;" creationSchemeURI="http://ensta-bretagne.fr/cyber/pimca/PimCA.fml.create()" receiver="this" userID="SYL" flexoID="13" />
      </ControlGraph1_AssignationAction>
    </BehaviourControlGraph_Sequence>
  </CreationScheme>
  <ActionScheme id="SYL-362" name="startNewSimulation" width="800" label="startNewSimulation" height="600" userID="SYL" flexoID="362">
    <BehaviourControlGraph_ReturnStatement id="SYL-369" userID="SYL" flexoID="369">
      <AssignableAction_AddVirtualModelInstance id="SYL-366" virtualModelInstanceTitle="parameters.simulationName" virtualModelInstanceName="parameters.simulationName" creationSchemeURI="http://ensta-bretagne.fr/cyber/cta/CTA.fml/Execution.fml.create(simulationName,description)" receiver="this" userID="SYL" flexoID="366">
        <AddFlexoConceptInstanceParameter id="SYL-367" paramName="simulationName" value="parameters.simulationName" userID="SYL" flexoID="367" />
        <AddFlexoConceptInstanceParameter id="SYL-368" paramName="description" value="parameters.description" userID="SYL" flexoID="368" />
      </AssignableAction_AddVirtualModelInstance>
    </BehaviourControlGraph_ReturnStatement>
    <GenericBehaviourParameter id="SYL-363" isRequired="true" widget="TEXT_FIELD" name="simulationName" type="java.lang.String" userID="SYL" flexoID="363" />
    <GenericBehaviourParameter id="SYL-364" widget="TEXT_AREA" name="description" type="java.lang.String" userID="SYL" flexoID="364" />
  </ActionScheme>
</VirtualModel>
